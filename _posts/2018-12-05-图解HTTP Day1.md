---
layout:     post
title:      图解HTTP
subtitle:   Day1
date:       2018-12-05
author:     Shenzq
header-img: img/post-bg-ios9-web.jpg
catalog:   true
tags:
    - 图解HTTP
---
web使用一种名为HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范，完成从客户端到服务器端等一系列运作流程。

网络基础 TCP/IP 
通常使用的网络实在TCP/IP协议族的基础上运作的。而HTTP属于它内部的一个子集。
计算机和网络设备要相互通信，双方就必须基于相同的方法。包括如何探测到通信目标、由哪一边先发起通信、使用哪种语言进行通信、怎样结束通信等规则需要实现确定。不同的硬件、操作系统之间的通信，都需要一种规则，这种规则我们称之为协议。像这样把与互联网相关联的协议集合起来总称为TCOP/IP。

TCP/IP的分层管理
TCP/IP 协议族胺参差分别分为： 应用层、传输层、网络层和数据链路层。

应用层：
应用层决定了向用户提供应用服务时通信的活动。TPCP/IP协议族内预存了各类通用的应用服务。比如FTP(File Transfer Protocol)和DNS（Domain Name System)服务就是其中两类。HTTP协议也处于该层。

传输层：
传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。在传输层有两个性质不同的协议：TCP（Transmission Control Prorocol) 和UDP(User Data Protocol).

网络层（网络互连层）：
网络层用来处理网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传输给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项中选择一条传输路线。

链路层（又名数据链路层，网络接口层）
用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC等物理可见部分。硬件上的范畴均在链路层的作用范围之内。

TCP/IP通信传输流
利用TCP/IP进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用端往下走，接收端从链路层往上走。
发送端在层与层之间传输数据时，每经过一层时必定会打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。
这种把数据信息包装起来的做法称为封装（encapsulate).

与HTTP关系密切的协议：IP、TCP和DNS
1. 负责传输的IP协议
按层次分，IP（Internet Protocol）网络协议位于网络层。IP协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是IP地址和MAC地址（Media Access Control Address)。
IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址。IP地址可以和MAC地址进行配对。IP地址可变换，但MAC地址基本上不会更改。
使用ARP协议凭借MAC地址进行通信：
IP间的通信以来MAC地址。在网络上，通信的双方在统一局域网（LAN）的情况是很少的。通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这时，会采用ARP（Address Resolution Protocol）。ARP是一种用以解析地址的协议，根据通信方的IP地址就可以反查出对应的MAC地址。
没有人能全面掌握互联网中的传输情况：
在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只能获悉很粗略的传输线路。这种机制被称为路由选择（routing).

确保可靠性的TCP协议
按层次分，TCP位于传输层，提供可靠的字节流服务。
所谓的字节流服务（Byte Stream Service)是指，为了方便将大块数据分割成报文段（segment）为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。一言以蔽之，TCP为了更容易传送大数据才把数据分割，而且能够确认数据最终是否送到到对方。
确保数据能够到达目标：
为了准确无误地将数据传到到目标处，TCP协议采用了三次握手（three-way handshaking）策略。它一定会向对方确定是否成功送到。握手过程中使用了TCP的标志（flag）--- SYN（synchronize）和ACK（acknowledgement）。
发送端首先发送带一个SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传到确认信息。最后发送端再回传一个带ACK标志的数据包，代表“握手”结束。
若在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。
除了三次握手，TCP还有其他各种手段来保证通信的可靠性。

负责域名解析的DNS服务
DNS（Domain Name System)服务是和HTTP一样位于应用层的协议。它提供域名到IP地址之间的解析服务。
用户通常使用主机名或域名来访问对方的计算机，而不是直接通过IP访问。DNS提供通过域名查找IP，或逆向从IP地址发查域名的服务。

